<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EyeTrip VR - Immersive 360¬∞ Experience</title>
    <meta name="description" content="Immersive 360¬∞ Virtual Reality Experience with WebXR support for Meta Quest">
    <meta name="keywords" content="VR, 360, WebXR, Meta Quest, Virtual Reality, Immersive Experience">
    
    <!-- PWA Meta Tags -->
    <meta name="application-name" content="EyeTrip VR">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="EyeTrip VR">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#667eea">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" href="images/eyetripvr-icon.png">
    <link rel="apple-touch-icon" href="images/eyetripvr-icon.png">
    <link rel="stylesheet" href="css/eyetrip-style.css">
    
    <!-- Three.js for 3D logo control -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.158.0/examples/jsm/"
            }
        }
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            background: #1b2a41;
        }
        
        body {
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        
        /* 3D Logo Strip */
        .logo-strip {
            position: fixed;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            max-width: 1400px;
            width: 90%;
            height: 100px;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: space-evenly;
            gap: 0;
            background: rgba(27, 42, 65, 0.4);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(205, 0, 255, 0.3);
            border-radius: 0 0 20px 20px;
            padding: 0 20px;
        }
        
        .logo-3d-wrapper {
            width: 80px;
            height: 80px;
            flex-shrink: 0;
            transition: transform 0.3s ease;
            cursor: pointer;
            position: relative;
        }
        
        .logo-3d-wrapper canvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        .logo-3d-wrapper:hover {
            transform: scale(1.1);
        }
        
        @media (max-width: 768px) {
            .logo-strip {
                height: 80px;
                padding: 0 15px;
                gap: 8px;
            }
            
            .logo-3d-wrapper {
                width: 60px;
                height: 60px;
            }
        }
        
        #video-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            object-fit: cover;
            z-index: -1;
        }
        
        .video-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(to bottom, rgba(1, 1, 155, 0.1), rgba(27, 42, 65, 0.2));
            z-index: 0;
            pointer-events: none;
        }
        
        .page-wrapper {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            padding: 2rem 0;
            padding-top: 120px; /* Space for outrun strip */
            position: relative;
            z-index: 1;
        }
        
        @media (max-width: 768px) {
            .page-wrapper {
                padding-top: 100px;
            }
        }
        
        .landing-container {
            text-align: center;
            max-width: 1400px;
            width: 90%;
            padding: 30px 40px;
            background: rgba(27, 42, 65, 0.6);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(205, 0, 255, 0.3);
            border: 1px solid rgba(240, 248, 255, 0.2);
            margin: auto;
        }
        
        .logo {
            margin-bottom: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 40px;
        }
        
        .logo img {
            height: 300px;
            width: auto;
            filter: brightness(0) invert(1) drop-shadow(0 8px 16px rgba(0, 0, 0, 0.8));
        }
        
        .logo-button {
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 500;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            text-decoration: none;
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
            background: linear-gradient(45deg, #cd00ff, #00eeff);
            color: #f0f8ff;
            box-shadow: 0 4px 15px rgba(205, 0, 255, 0.4);
            white-space: nowrap;
        }
        
        .logo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(205, 0, 255, 0.6);
        }
        
        .logo-button-text {
            font-size: 1.1rem;
            font-weight: 500;
        }
        
        .logo-button-subtext {
            font-size: 0.75rem;
            opacity: 0.85;
            font-weight: 300;
            white-space: normal;
            max-width: 200px;
            line-height: 1.2;
        }
        
        .tagline {
            font-size: 1.5rem;
            font-weight: 300;
            margin-bottom: 30px;
            opacity: 0.9;
        }
        
        .description {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 40px;
            opacity: 0.8;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .user-note {
            font-size: 0.95rem;
            line-height: 1.5;
            margin-bottom: 30px;
            padding: 12px 20px;
            background: rgba(0, 238, 255, 0.1);
            border-left: 3px solid #00eeff;
            border-radius: 8px;
            opacity: 0.9;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .user-note strong {
            color: #00eeff;
        }
        
        .cta-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }
        
        .btn {
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 500;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            min-width: 180px;
            justify-content: center;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #cd00ff, #00eeff);
            color: #f0f8ff;
            box-shadow: 0 4px 15px rgba(205, 0, 255, 0.4);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(205, 0, 255, 0.6);
        }
        
        .btn-secondary {
            background: rgba(240, 248, 255, 0.1);
            color: #f0f8ff;
            border: 2px solid rgba(240, 248, 255, 0.3);
        }
        
        .btn-secondary:hover {
            background: rgba(240, 248, 255, 0.2);
            border-color: #cd00ff;
            transform: translateY(-2px);
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 12px;
            margin-top: 20px;
        }
        
        .feature {
            padding: 12px 8px;
            background: rgba(240, 248, 255, 0.1);
            border-radius: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(240, 248, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .feature:hover {
            border-color: rgba(205, 0, 255, 0.5);
            transform: translateY(-4px);
            box-shadow: 0 8px 30px rgba(205, 0, 255, 0.3);
        }
        
        .feature-icon {
            font-size: 1.4rem;
            margin-bottom: 6px;
        }
        
        .feature h3 {
            font-size: 1rem;
            margin-bottom: 5px;
        }
        
        .feature p {
            font-size: 0.8rem;
            opacity: 0.8;
        }
        
        @media (max-width: 768px) {
            .logo {
                flex-direction: column;
                gap: 20px;
            }
            
            .logo img {
                height: 210px;
            }
            
            .logo-button {
                width: 100%;
                max-width: 280px;
                justify-content: center;
            }
            
            .tagline {
                font-size: 1.2rem;
            }
            
            .cta-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 280px;
            }
        }
    </style>
</head>
<body>
    <!-- 3D Logo Strip -->
    <div class="logo-strip" id="logoStrip"></div>
    
    <video id="video-background" autoplay muted loop playsinline>
        <source src="/assets/videos/stumpy_rect_16_9_4ktest_isVR.mp4" type="video/mp4">
    </video>
    
    <div class="page-wrapper">
    <div class="landing-container">
        <div class="logo">
            <a href="gallery.html" class="logo-button">
                <span class="logo-button-text">üé¨ Enter Gallery</span>
                <span class="logo-button-subtext">Explore 4 immersive 360¬∞ VR videos</span>
            </a>
            <img src="images/eyetripimagesvr-tall.svg?v=2" alt="EyeTrip VR">
            <a href="gallery.html" class="logo-button">
                <span class="logo-button-text">Enter Gallery üé¨</span>
                <span class="logo-button-subtext">Explore 4 immersive 360¬∞ VR videos</span>
            </a>
        </div>
        <p class="tagline">Immersive 360¬∞ Virtual Reality Experience</p>
        
        <p class="description">
            Step into breathtaking 360¬∞ worlds and explore immersive virtual reality content. 
            Experience stunning panoramic videos with full WebXR support for Meta Quest and other VR headsets. 
            Navigate with intuitive controls and discover new perspectives in virtual reality.
        </p>
        
        <div class="user-note">
            <strong>ü•Ω Best experienced in a VR headset</strong> (Meta Quest, etc.)<br>
            Desktop and mobile users can enjoy an interactive 360¬∞ panoramic view with mouse/touch controls.
        </div>
        
        <div class="features">
            <div class="feature">
                <div class="feature-icon">üåê</div>
                <h3>360¬∞ Content</h3>
                <p>Immersive panoramic videos and environments</p>
            </div>
            <div class="feature">
                <div class="feature-icon">ü•Ω</div>
                <h3>VR Ready</h3>
                <p>Full WebXR support for Meta Quest headsets</p>
            </div>
            <div class="feature">
                <div class="feature-icon">üéÆ</div>
                <h3>Interactive</h3>
                <p>Intuitive VR controllers and hand tracking</p>
            </div>
            <div class="feature">
                <div class="feature-icon">üé®</div>
                <h3>Immersive Art</h3>
                <p>Dive into 360¬∫ experiences with art, music and sound</p>
            </div>
            <div class="feature">
                <div class="feature-icon">‚ú®</div>
                <h3>Curiosity</h3>
                <p>Loose yourself in a state of wonder and fascination</p>
            </div>
            <div class="feature">
                <div class="feature-icon">üß†</div>
                <h3>NeuroScience</h3>
                <p>Feel the effects this experience can have on your mind and nervous system</p>
            </div>
        </div>
        </div>
    </div>
    <footer class="site-footer">
            <nav class="footer-nav">
                <a href="gallery.html">Gallery</a>
                <a href="about.html">About</a>
                <a href="contact.html">Contact</a>
            </nav>
            <div>&copy; 2025 David Aughenbaugh - EyeTripVR. All rights reserved.</div>
            <div>Powered by <a href="https://dulce.com" target="_blank">Dulce Dotcom</a></div>
        </footer>
        </div> <!-- end .page-wrapper -->
        
        <!-- PWA Service Worker Registration -->
        <script type="module">
            import * as THREE from 'three';
            import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
            
            // Video background autoplay
            const videoBackground = document.getElementById('video-background');
            
            if (videoBackground) {
                videoBackground.play().catch(err => {
                    console.log('Video autoplay prevented:', err);
                    document.addEventListener('click', function playOnClick() {
                        videoBackground.play();
                        document.removeEventListener('click', playOnClick);
                    }, { once: true });
                });
            }
            
            // Three.js 3D Logo Strip
            class Logo3D {
                constructor(container, modelUrl) {
                    this.container = container;
                    this.modelUrl = modelUrl;
                    this.isHovered = false;
                    this.rotation = 0;
                    this.targetRotation = 0;
                    this.rotationSpeed = 0;
                    this.mouseX = 0;
                    this.initialRotation = 0;
                    
                    this.init();
                }
                
                init() {
                    // Create scene
                    this.scene = new THREE.Scene();
                    
                    // Create camera
                    const aspect = 1; // Square aspect ratio
                    this.camera = new THREE.PerspectiveCamera(45, aspect, 0.1, 1000);
                    this.camera.position.z = 3;
                    
                    // Create renderer
                    this.renderer = new THREE.WebGLRenderer({ 
                        alpha: true, 
                        antialias: true 
                    });
                    this.renderer.setSize(80, 80);
                    this.renderer.setClearColor(0x000000, 0);
                    this.container.appendChild(this.renderer.domElement);
                    
                    // Add lights
                    const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
                    this.scene.add(ambientLight);
                    
                    const directionalLight1 = new THREE.DirectionalLight(0xffffff, 0.8);
                    directionalLight1.position.set(1, 1, 1);
                    this.scene.add(directionalLight1);
                    
                    const directionalLight2 = new THREE.DirectionalLight(0xcd00ff, 0.4);
                    directionalLight2.position.set(-1, -1, 0.5);
                    this.scene.add(directionalLight2);
                    
                    // Load model
                    const loader = new GLTFLoader();
                    loader.load(
                        this.modelUrl,
                        (gltf) => {
                            this.model = gltf.scene;
                            
                            // Center and scale model
                            const box = new THREE.Box3().setFromObject(this.model);
                            const center = box.getCenter(new THREE.Vector3());
                            const size = box.getSize(new THREE.Vector3());
                            const maxDim = Math.max(size.x, size.y, size.z);
                            const scale = 2 / maxDim;
                            
                            this.model.scale.setScalar(scale);
                            this.model.position.sub(center.multiplyScalar(scale));
                            
                            // Rotate to upright and front-facing position
                            this.model.rotation.x = 0; // No X rotation - keep upright
                            this.model.rotation.y = 0; // No Y rotation - front-facing
                            
                            // Store initial rotation
                            this.initialRotation = this.model.rotation.y;
                            
                            // Apply metallic PBR material
                            this.model.traverse((child) => {
                                if (child.isMesh) {
                                    child.material.metalness = 0.9;
                                    child.material.roughness = 0.2;
                                    child.material.envMapIntensity = 1.5;
                                }
                            });
                            
                            this.scene.add(this.model);
                            this.animate();
                        },
                        // Progress callback
                        (xhr) => {
                            if (xhr.total > 0) {
                                console.log(`${this.modelUrl}: ${(xhr.loaded / xhr.total * 100).toFixed(0)}% loaded`);
                            }
                        },
                        // Error callback - create fallback colored cube
                        (error) => {
                            console.error(`Error loading ${this.modelUrl}:`, error);
                            console.log('Creating fallback cube for', this.modelUrl);
                            
                            // Determine color from model path
                            const colors = {
                                'blue': 0x1976d2,
                                'green': 0x4caf50,
                                'red': 0xf44336,
                                'yellow': 0xffeb3b
                            };
                            let color = 0x667eea; // Default purple
                            for (const [name, colorValue] of Object.entries(colors)) {
                                if (this.modelUrl.toLowerCase().includes(name)) {
                                    color = colorValue;
                                    break;
                                }
                            }
                            
                            // Create fallback geometry
                            const geometry = new THREE.BoxGeometry(1.5, 1.5, 1.5);
                            const material = new THREE.MeshStandardMaterial({ 
                                color: color,
                                metalness: 0.8,
                                roughness: 0.3
                            });
                            this.model = new THREE.Mesh(geometry, material);
                            this.initialRotation = 0;
                            this.scene.add(this.model);
                            this.animate();
                        }
                    );
                    
                    // Mouse events
                    this.container.addEventListener('mouseenter', () => {
                        this.isHovered = true;
                    });
                    
                    this.container.addEventListener('mouseleave', () => {
                        this.isHovered = false;
                        this.rotationSpeed = 0;
                    });
                    
                    this.container.addEventListener('mousemove', (e) => {
                        if (!this.isHovered) return;
                        
                        const rect = this.container.getBoundingClientRect();
                        const x = e.clientX - rect.left;
                        this.mouseX = (x / rect.width) * 2 - 1; // Normalize to -1 to 1
                    });
                }
                
                animate = () => {
                    requestAnimationFrame(this.animate);
                    
                    if (this.model) {
                        if (this.isHovered) {
                            // Mouse hover spinning - speed based on mouse position
                            const speedMultiplier = Math.abs(this.mouseX) * 3 + 1;
                            this.rotationSpeed = 0.05 * speedMultiplier;
                            // Rotate on Y axis for upright spinning
                            this.model.rotation.y += this.rotationSpeed;
                        } else {
                            // Smoothly return to initial rotation
                            const diff = this.initialRotation - this.model.rotation.y;
                            
                            // Normalize the difference to handle wrapping around 2PI
                            let normalizedDiff = diff % (Math.PI * 2);
                            if (normalizedDiff > Math.PI) normalizedDiff -= Math.PI * 2;
                            if (normalizedDiff < -Math.PI) normalizedDiff += Math.PI * 2;
                            
                            // Apply easing back to initial position
                            if (Math.abs(normalizedDiff) > 0.01) {
                                this.model.rotation.y += normalizedDiff * 0.1;
                            } else {
                                this.model.rotation.y = this.initialRotation;
                            }
                        }
                    }
                    
                    this.renderer.render(this.scene, this.camera);
                }
            }
            
            // Initialize Logo Strip
            function initLogoStrip() {
                const logoStrip = document.getElementById('logoStrip');
                const models = [
                    '/assets/models/eyetrip3Dblue.glb',
                    '/assets/models/eyetrip3Dgreen.glb',
                    '/assets/models/eyetrip3Dred.glb',
                    '/assets/models/eyetrip3Dyellow.glb'
                ];
                
                logoStrip.innerHTML = '';
                
                // Calculate how many logos will fit in the visible strip
                const stripStyles = window.getComputedStyle(logoStrip);
                const stripWidth = logoStrip.offsetWidth - (parseFloat(stripStyles.paddingLeft) + parseFloat(stripStyles.paddingRight));
                const logoWidth = 80; // Width of each logo wrapper
                const minGap = 10; // Minimum gap between logos for spacing
                const effectiveLogoWidth = logoWidth + minGap; // Total space per logo including gap
                
                // Cap at 16 logos maximum and use conservative calculation
                const calculatedLogos = Math.floor(stripWidth / effectiveLogoWidth);
                const logosToCreate = Math.min(calculatedLogos, 16);
                
                // Create only the number of logos that will fit
                for (let i = 0; i < logosToCreate; i++) {
                    const modelUrl = models[i % models.length];
                    const wrapper = document.createElement('div');
                    wrapper.className = 'logo-3d-wrapper';
                    logoStrip.appendChild(wrapper);
                    
                    // Create Three.js scene for this logo
                    new Logo3D(wrapper, modelUrl);
                }
            }
            
            // Initialize on load
            window.addEventListener('load', () => {
                initLogoStrip();
            });
            
            // Reinitialize on window resize
            let resizeTimeout;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(() => {
                    initLogoStrip();
                }, 250);
            });
        </script>
        
        <script>
            // PWA Service Worker
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('/sw.js')
                        .then(registration => {
                            console.log('‚úÖ [PWA] Service Worker registered:', registration);
                        })
                        .catch(error => {
                            console.error('‚ùå [PWA] Service Worker registration failed:', error);
                        });
                });
            }
        </script>
		</body>
</html>
